<!DOCTYPE html>
<html lang="{{.Language}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">
    <title>{{.Post.Title}} - {{.BlogName}}</title>
    <link rel="canonical" href="{{.BaseURL}}/posts/{{.Post.Slug}}">
    <meta name="description" content="{{.Post.Summary}}">
    <link rel="alternate" type="application/rss+xml" title="{{.BlogName}} RSS Feed" href="{{.BaseURL}}/feed">
    <link rel="stylesheet" href="/static/post-assets/post-style.css">
    <link rel="stylesheet" href="/static/post-assets/github.min.css">
    {{if .CustomCSS}}
    <style>
        {{.CustomCSS}}
    </style>
    {{end}}
    <script src="/static/post-assets/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
            
            // Make all links in post content open in new tab
            document.querySelectorAll('article a').forEach((link) => {
                link.setAttribute('target', '_blank');
                link.setAttribute('rel', 'noopener noreferrer');
            });
        });
    </script>
</head>
<body class="home">
<header>
</header>
<main>
    <h1><a href="/">{{.Post.Title}}</a></h1>
    <p>
        <i>
            <time datetime="{{.Post.CreatedAt}}">{{.Post.FormattedDate}}</time>
            {{if .Post.Tags}}
            · 
            {{range $index, $tag := .Post.Tags}}{{if $index}}, {{end}}<a href="/tags/{{$tag.ID}}/posts">{{$tag.Name}}</a>{{end}}
            {{end}}
        </i>
        <i>
            · {{.Post.ViewCount}} {{.T.Views}}
        </i>
    </p>
    <article>
        {{.Post.ContentHTML}}
    </article>
    <br/>
    
    <hr>
    <h3>{{.T.Comments}}</h3>
    
    <div id="comments-section" class="comment-container">
        <div id="comments" class="clearfix">
            {{if .Comments}}
            <ul class="comment-list">
                {{range .Comments}}
                <li class="comment-body">
                    <div class="comment-header">
                        <img class="avatar" src="https://www.gravatar.com/avatar/{{.EmailHash}}?s=50&d=mp" alt="{{.Name}}" loading="lazy">
                        <span class="comment-author">{{.Name}}</span>
                    </div>
                    <div class="comment-content">
                        <p>{{.Content}}</p>
                    </div>
                    <div class="comment-meta">
                        <time datetime="{{.CreatedAt}}">{{.FormattedDate}}</time>
                    </div>
                </li>
                {{end}}
            </ul>
            {{else}}
            <p class="response">{{.T.NoCommentsYet}}</p>
            {{end}}
        </div>
        
        <form method="post" action="/posts/{{.Post.Slug}}/comments" id="comment-form" class="comment-form" role="form">
            <input type="text" name="name" class="form-control" placeholder="{{.T.YourName}}" required maxlength="100">
            <input type="email" name="email" class="form-control" placeholder="{{.T.YourEmail}}" maxlength="255">
            <textarea name="content" id="textarea" class="form-control" placeholder="{{.T.LeaveComment}}" required maxlength="2000"></textarea>
            <button type="submit" class="submit">{{.T.PostComment}}</button>
            <p class="comment-help-text" style="font-size: 0.8rem; margin: 10px 0; color:gray;">{{.T.CommentHelp}}</p>
        </form>
    </div>
    <br/>
</main>

<footer>
    <span id="footer-directive">
        <nav>
            {{range .FooterLinks}}
            <a href="{{.URL}}">{{.Text}}</a>
            {{end}}
        </nav>
    </span>
    <span>
        &copy; {{.Year}} <a href="/">{{.BlogName}}</a>
    </span>
</footer>
</body>
</html>
